@using hhs_p6_webshop_project.Models.ProductModels
@using Microsoft.AspNetCore.Mvc.Rendering

@foreach (Product item in Model.Products)
{

    var imagePath = "images/default.jpg";

    try
    {
        // Get first image (todo fix)
        imagePath = item.ColorOptions.FirstOrDefault().Images.FirstOrDefault().Path;
    }
    catch (Exception e)
    {
        // Tering harde beun maar het werkt echt perfect
    }

    <div class="product col-md-4 col-sm-12">
        <a asp-action="Details" asp-route-id="@item.ProductId">
            <div class="vertical-align">
                <div class="horizontal-align">
                    <img class="product-image" src="~/@imagePath" alt="@item.Name" />
                </div>
            </div>

            <h5 class="product-title">
                @item.Name
            </h5>

            <span class="product-sku">
                <!-- TODO: Get the SKU -->
                Artikel nr. @item.ProductId
            </span>

            <div class="product-colors">
                @{
                    foreach (var color in item.ColorOptions)
                    {
                        <span class="color-circle @color.Color"></span>
                    }
                }
            </div>

            @if (User.Identity.IsAuthenticated)
            {
                <div class="product-edit-buttons">
                    <a class="btn" asp-action="Edit" asp-route-id="@item.ProductId">Edit</a>
                    <a class="btn" asp-action="Delete" asp-route-id="@item.ProductId">Delete</a>
                </div>
            }
        </a>
    </div>
}